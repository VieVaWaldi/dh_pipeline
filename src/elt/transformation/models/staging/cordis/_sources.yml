version: 1
sources:
  - name: cordis
    description: "Raw CORDIS research data from European Commission"
    schema: cordis
    tables:
      - name: person
        description: "Person/researcher information"
        columns:
          - name: id
            tests:
              - not_null
              - unique
          - name: title
          - name: name
          - name: first_name
          - name: last_name
          - name: telephone_number

      - name: topic
        description: "Research topics and categories"
        columns:
          - name: id
            tests:
              - not_null
              - unique
          - name: name
            tests:
              - not_null
              - unique
          - name: level
            tests:
              - not_null

      - name: weblink
        description: "External web links and references"
        columns:
          - name: id
            tests:
              - not_null
              - unique
          - name: url
            tests:
              - not_null
              - unique
          - name: title

      - name: fundingprogramme
        description: "EU funding programmes"
        columns:
          - name: id
            tests:
              - not_null
              - unique
          - name: code
            tests:
              - not_null
              - unique
          - name: title
          - name: short_title
          - name: framework_programme
          - name: pga
          - name: rcn

      - name: institution
        description: "Research institutions and organizations"
        columns:
          - name: id
            tests:
              - not_null
              - unique
          - name: legal_name
            tests:
              - not_null
              - unique
          - name: sme
          - name: url
          - name: short_name
          - name: vat_number
          - name: street
          - name: postbox
          - name: postalcode
          - name: city
          - name: country
          - name: geolocation
          - name: type_title
          - name: nuts_level_0
          - name: nuts_level_1
          - name: nuts_level_2
          - name: nuts_level_3

      - name: researchoutput
        description: "Research outputs and publications"
        columns:
          - name: id
            tests:
              - not_null
              - unique
          - name: id_original
            tests:
              - not_null
              - unique
          - name: from_pdf
          - name: type
            tests:
              - not_null
          - name: doi
          - name: title
            tests:
              - not_null
          - name: publication_date
          - name: journal
          - name: summary
          - name: comment
          - name: fulltext
          - name: funding_number
          - name: journal_number
          - name: journal_title
          - name: published_pages
          - name: published_year
          - name: publisher
          - name: issn

      - name: project
        description: "Research projects"
        columns:
          - name: id
            tests:
              - not_null
              - unique
          - name: id_original
            tests:
              - not_null
              - unique
          - name: doi
          - name: title
            tests:
              - not_null
          - name: acronym
          - name: status
          - name: start_date
          - name: end_date
          - name: ec_signature_date
          - name: total_cost
          - name: ec_max_contribution
          - name: objective
          - name: call_identifier
          - name: call_title
          - name: call_rcn

      # Junction Tables
      - name: j_institution_person
        description: "Junction: institutions to persons"
        columns:
          - name: institution_id
            tests:
              - not_null
          - name: person_id
            tests:
              - not_null

      - name: j_researchoutput_person
        description: "Junction: research outputs to persons"
        columns:
          - name: researchoutput_id
            tests:
              - not_null
          - name: person_id
            tests:
              - not_null
          - name: person_position
            tests:
              - not_null

      - name: j_researchoutput_topic
        description: "Junction: research outputs to topics"
        columns:
          - name: researchoutput_id
            tests:
              - not_null
          - name: topic_id
            tests:
              - not_null

      - name: j_researchoutput_weblink
        description: "Junction: research outputs to weblinks"
        columns:
          - name: researchoutput_id
            tests:
              - not_null
          - name: weblink_id
            tests:
              - not_null

      - name: j_researchoutput_institution
        description: "Junction: research outputs to institutions"
        columns:
          - name: researchoutput_id
            tests:
              - not_null
          - name: institution_id
            tests:
              - not_null

      - name: j_project_topic
        description: "Junction: projects to topics"
        columns:
          - name: project_id
            tests:
              - not_null
          - name: topic_id
            tests:
              - not_null

      - name: j_project_weblink
        description: "Junction: projects to weblinks"
        columns:
          - name: project_id
            tests:
              - not_null
          - name: weblink_id
            tests:
              - not_null

      - name: j_project_fundingprogramme
        description: "Junction: projects to funding programmes"
        columns:
          - name: project_id
            tests:
              - not_null
          - name: fundingprogramme_id
            tests:
              - not_null

      - name: j_project_institution
        description: "Junction: projects to institutions with additional metadata"
        columns:
          - name: project_id
            tests:
              - not_null
          - name: institution_id
            tests:
              - not_null
          - name: institution_position
            tests:
              - not_null
          - name: ec_contribution
          - name: net_ec_contribution
          - name: total_cost
          - name: type
          - name: organization_id
          - name: rcn

      - name: j_project_researchoutput
        description: "Junction: projects to research outputs"
        columns:
          - name: project_id
            tests:
              - not_null
          - name: researchoutput_id
            tests:
              - not_null